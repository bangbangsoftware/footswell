!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/assets/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=new Array,r=new Array;let s="";const l=e=>null!=e&&null!=e.localName&&"input"===e.localName,i=e=>e.style.display="none",c=e=>e.style.display="block";let a=window.localStorage,d=document,u="reg";const m={},g=e=>m[e],p=e=>{if(l(e)){return e.value}return e.innerText},f=(e,t)=>{if(null!=e){if(l(e)){e.value=t}e.innerText=t,b(e,w)}else console.error("Cannot set "+t+" as element is null")},y=e=>null==e?"":e.getAttribute("name")||"";function h(e){const t=y(e);if(""===t)return console.error("NO name in element !!!!? ",e),m;const n=g(t),o={currentValue:p(e),elements:[e]},r=n||o;r.currentValue=p(e),r.elements=r.elements.map(e=>(f(e,r.currentValue),e)),r.elements.find(t=>t.id===e.id)||r.elements.push(e),m[t]=r;const s={};Object.keys(m).forEach(e=>{s[e]=m[e].currentValue});const l=JSON.stringify(s);return a.setItem(u,l),m}function I(e=Array(),t="reg"){u=t,i(d.getElementsByTagName("BODY")[0]);for(const e in m)delete m[e];M();const n=e.map(e=>e(D)),o=d.querySelectorAll("*");let r=new Array;o.forEach(e=>{r=O(e,n,r)}),console.log("Detected....."),r.forEach(e=>console.log(e.name+" - "+e.qty)),console.log("............."),c(d.getElementsByTagName("BODY")[0])}const v=new Map,w=new Map,E=new Map,M=()=>{console.log("Binder getting data from '"+u+"' in local storage");const e=a.getItem(u);if(k(),e)try{const t=JSON.parse(e);Object.keys(t).forEach(e=>m[e]={currentValue:t[e],elements:[]})}catch(t){console.error("cannot parse",e),console.error(typeof e),console.error(t)}},L=(e,t)=>{if(null==e.target)return;const n=e.target;b(n,t)},b=(e,t)=>{const n=e.id,o=t.get(n);null!=o&&o.forEach(t=>t(e))},B=(e,t,n=v)=>{const o=n.get(e),r=o||new Array;r.push(t),n.set(e,r)},k=()=>{d.addEventListener("change",e=>L(e,v)),d.addEventListener("onpaste",e=>L(e,v)),d.addEventListener("keyup",e=>L(e,v)),d.addEventListener("onin",e=>L(e,v)),d.addEventListener("statechange",e=>L(e,w)),d.addEventListener("click",e=>((e,t)=>{if(null==e.target)return;const n=e.target.id,o=t.get(n);null!=o?o(e):console.error("ACTION: no action for "+n)})(e,E))},A=(e,t=new Array)=>{if(e.id?-1===t.indexOf(e.id)&&t.push(e.id):console.error("no id, no click listener",e),0===e.childNodes.length)return t;for(var n=0,o=e.childNodes.length;n<o;n++){const o=e.childNodes[n];o instanceof HTMLElement&&(t=A(o,t))}return t},x=(e,t)=>{const n=e.findIndex(e=>e.name===t);if(-1===n)return e.push({name:t,qty:1}),e;const o={name:t,qty:e[n].qty+1};return e[n]=o,e},O=(e,t=Array(),n)=>{if(null==e)return n;n=((e,t)=>(0===t.length&&x(e,"total"),t.forEach(t=>{const n=t.attributes[0];x(e,n)}),e))(n,S(e,t));for(var o=0,r=e.childNodes.length;o<r;o++){const r=e.childNodes[o];if(r instanceof HTMLElement)return O(r,t,n)}return n},T=(e,t)=>{if(e.id&&void 0!==e.id)return e;const n=P(t," ","-"),r=P(n,",","-")+"-"+o.length;e.id=r;const s=l(e)?"input":"None input";return console.error("No id for "+s+" element so, generating one: ",e.id),e},N=e=>{const t=s+"";return s=e,t},V=()=>s,D={put:h,get:g,getValue:p,setValue:f,clickListener:(e,t,n=[])=>{const o=e=>{(e=>0===e.length?(console.log("No mode list set"),!0):0===s.length?(console.log("No mode set"),!0):e.indexOf(s)>-1?(console.log("Mode in list"),!0):(console.warn("'"+s+"' is not in mode list ",e),!1))(n)&&t(e)};A(e).filter(e=>!E.has(e)).forEach(e=>E.set(e,o))},stateListener:(e,t)=>{B(e,e=>t(e),w)},fixID:T},P=(e,t,n)=>e.split(t).join(n),S=(e,t=Array())=>{const n=y(e);return n&&(T(e,n),j(e,n)),((e,t)=>e.filter(e=>((e,t)=>void 0!==e.attributes.find(e=>t.hasAttribute(e)))(e,t)))(t,e).filter(t=>{const n=t.attributes.map(t=>e.getAttribute(t)).find(e=>null!=e)||"",o=n||t.attributes[0];return T(e,o),C(e,t,o)})},C=(e,t,n)=>{if(r.some(n=>n===e.id+"::"+t.attributes[0]))return!1;return r.push(e.id+"::"+t.attributes[0]),t.process(e,n)},j=(e,t)=>!o.some(t=>t===e.id)&&(o.push(e.id),W(e,t),l(e)&&((e,t)=>{B(e.id,e=>t(e))})(e,e=>h(e)),!0),W=(e,t)=>{const n=g(t);(n?n.elements:[]).push(e);const o=n?n.currentValue:p(e);f(e,o),h(e)},F=new Array;let Y;const J=(e,t)=>n=>{console.log(n.id+" ACTION clicked"),null==Y&&(Y=((e,t)=>{const n=F.map(e=>e+"-"+t.dataIDpostFix).map(e=>document.getElementById(e)).filter(t=>{if(null==t)return!1;const n=e.getValue(t);return console.log("VALUE IS ------"+n+"======"),null!=n&&n.length>0});return console.log("FOUND ",n),0===n.length?null:n[0]})(e,t));const o=n.id+"-"+t.dataIDpostFix,r=document.getElementById(o);null!=r?(console.log(o+", element is ",r),e.setValue(r,t.data),e.put(r),null!=Y&&(e.setValue(Y,""),e.put(Y)),Y=r):console.error("Swap move action - "+o+" does not exist in DOM?!")},U=(e,t,n)=>{-1===F.indexOf(n)&&F.push(n);const o=J(e,t);return{id:t.actionID,callback:o}};let q=window.localStorage;let H,_=document;const R=new Array,$=new Array,G=(e,t)=>{const n=(e=>{if(null!=e.getAttribute("swapper-action"))return!1;const t=e.getAttribute("swapper");return null!=t&&t})(t);n&&$.filter(e=>e.group===n).forEach(n=>{(e=>{R.push(e)})(U(e,n,t.id))})},K=(e,t)=>{const n=q.getItem("swap-"+t);if(null==q.getItem("swap-action-"+t)&&null==n)return void((e,t)=>{e.classList.add("swap-selected"),q.setItem("swap-action-"+t,e.id)})(e,t);if(q.removeItem("swap-action-"+t),null==n)return void console.log("Nothing selected for action yet");q.removeItem("swap-"+t),e.classList.remove("swap-selected");const o=_.getElementById(n);if(null==o)return void console.error(n+" is missing??");o.classList.remove("swap-selected");const r=R.find(t=>t.id===e.id);null!=r?r.callback(o):console.error("No id action registered for "+e.id)},X=e=>{const t=e.getAttribute("swapper");if(null==t)return void(e=>{const t=e.getAttribute("swapper-action");null!=t?K(e,t):console.error("swapper action has no group? ",e)})(e);const n=q.getItem("swap-"+t);if(!n)return void((e,t)=>{e.classList.add("swap-selected"),q.setItem("swap-"+t,e.id);const n=q.getItem("swap-action-"+t);if(null==n)return;const o=_.getElementById(n);null!=o?K(o,t):console.error(n+" action is missing??")})(e,t);q.removeItem("swap-"+t);const o=_.getElementById(n);if(null==o)return void console.error(n+" is missing ???!");if(o.classList.remove("swap-selected"),n===e.id)return void console.error("what are you doing swap with itself???!");const r=H.getValue(o)+"",s=H.getValue(e);s!==r?(H.setValue(e,r+""),H.setValue(o,s+""),H.put(e),H.put(o)):console.log("Don't swap to itself '"+s+"'")};let z;const Q=e=>{const t=(e.getAttribute("toggle")||"").split(/,/).map(e=>e.trim()),n=z.getValue(e),o=t.map((e,t)=>{return e.trim()===n&&t}).find(e=>!1!==e);if(void 0===o)return console.error("Cannot find element with value '"+n+"'"),z.setValue(e,t[0]),void z.put(e);const r=t.length>o+1?o+1:0;z.setValue(e,t[r]),z.put(e)};let Z=document;const ee={},te=(e,t,n)=>(e.clickListener(n,()=>ne(t)),!0),ne=e=>{ee[e].forEach(e=>se(e))},oe=(e,t)=>{const n=ee[e],o=void 0===n?[]:n;o.push(t),ee[e]=o},re=()=>{var e=Z.createElement("style");e.type="text/css",e.innerHTML=".hide { display: none; } ",Z.getElementsByTagName("head")[0].appendChild(e)},se=e=>{e.classList.contains("hide")?e.classList.remove("hide"):e.classList.add("hide")};let le=document;const ie=(e,t)=>{const n=le.getElementById(t);return null==n?ce(e,t):e.getValue(n)},ce=(e,t)=>{const n=e.get(t);return null==n?null:n.currentValue},ae=()=>{var e=le.createElement("style");e.type="text/css",e.innerHTML=".hide { display: none; } ",le.getElementsByTagName("head")[0].appendChild(e)},de=e=>null!=e&&(null!=e&&e.trim().length>0),ue=(e,t)=>{console.log(e.id+" >>",t,"<< "+de(t)),de(t)?(console.log("IFP - removing "+e.id+" hiding"),e.classList.remove("hide")):(console.log("IFP - "+e.id+" hiding"),e.classList.add("hide")),console.log("")};const me=(e,t,n)=>()=>{const o=parseInt(t.innerText)+1;o>59?pe(e,t,n):t.innerText=o<10?`0${o}`:o},ge=(e,t)=>()=>{t.innerText="00",t.classList.remove("red"),e.innerText="00",e.classList.remove("red")};const pe=(e,t,n)=>{t.innerText=0;const o=parseInt(e.innerText)+1;o<n?e.innerText="0"+o:(e.innerText=fe(o),t.classList.add("red"),e.classList.add("red"))},fe=e=>e<10?"0"+e:e;let ye=[];const he=e=>(t,n="score")=>{const o=e.getElementById(n);o.innerText=parseInt(o.innerText)+t},Ie=(e,t,n=1)=>{if(n<1?t.element.classList.add("crossout"):t.element.classList.remove("crossout"),null==t.state)return;e(n,"concide"===t.state?"vrsScore":"score")},ve=e=>t=>{t.crossedOut=!t.crossedOut;const n=t.crossedOut?-1:1;Ie(e,t,n)},we=(e,t)=>{const n=ye.find(t=>t.detail===e);n.element.innerText=""+t,n.detail=""+t};const Ee=(e,t,n,o)=>r=>{r.time=function(e=new Date){return`${fe(e.getHours())}:${fe(e.getMinutes())}:${fe(e.getSeconds())}`}();const s=e.createElement("div");s.createName="time",s.classList.add("result"),s.innerText=r.time;const l=e.createElement("div");l.createName="result",l.classList.add("result"),l.innerText=r.detail,r.element=l;const i=e.createElement("button");return i.createName="deleteToggle",i.classList.add("result"),i.innerText="X",i.addEventListener("click",()=>n(r)),r.id=ye.length,r.crossedOut=!1,t.appendChild(s),t.appendChild(l),t.appendChild(i),ye.push(r),null!=r.state&&Ie(o,r,1),r},Me=e=>()=>{const t=new Date;let n="";ye.filter(e=>!e.crossedOut).forEach(e=>{n=n+e.time+", "+e.detail+"\n"});const o=t+".csv",r=new Blob([n],{type:"csv"});if(window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(r,o);const s=e.createElement("a"),l=URL.createObjectURL(r);s.href=l,s.download=o,e.body.appendChild(s),s.click(),setTimeout(()=>{e.body.removeChild(s),window.URL.revokeObjectURL(l)},0)};let Le=window.localStorage,be=document;const Be=new Array,ke="swap-parent-id-for-",Ae=new Array,xe=new Array;const Oe=(e,t)=>{const n=Ne(e,t);if(!n)return!1;const o={currentParentID:n,originParentID:n},r=Le.getItem(ke+e.id);if(r){const t=JSON.parse(r);return Te(e,t),t}return o},Te=(e,t)=>{const n=Be.findIndex(e=>t.originParentID===e.pids.originParentID||t.currentParentID===e.pids.originParentID||t.originParentID===e.pids.currentParentID||t.currentParentID===e.pids.currentParentID);if(-1===n)return void Be.push({element:e,pids:t});const o=Be.splice(n,1);Ve(e),Ve(o[0].element)},Ne=(e,t)=>{const n=e.parentElement;return null!=n&&t.fixID(n,ke+e.id).id},Ve=e=>{const t=e.getAttribute("swap");if(null==t)return void Pe(e);const n="swapall"+t,o=Le.getItem(n);if(!o)return void je(e,t,n);Le.removeItem(n);const r=be.getElementById(o);if(null==r)return void console.error(o+" is missing ???!");if(r.classList.remove("swap-selected"),o===e.id)return void console.error("what are you doing swap with itself???!");const s=r.parentElement,l=e.parentElement;l&&s&&(l.removeChild(e),s.removeChild(r),l.appendChild(r),s.appendChild(e),De(r,l.id),De(e,s.id))},De=(e,t)=>{const n=ke+e.id,o=Le.getItem(n);if(null==o)return!1;const r=JSON.parse(o);r.currentParentID=t,r.originParentID===r.currentParentID?Le.removeItem(n):Le.setItem(n,JSON.stringify(r))},Pe=e=>{const t=e.getAttribute("swap-action");null!=t?Se(e,t):console.error("swap action has no group? ",e)},Se=(e,t)=>{const n=Le.getItem("swap-action-"+t),o="swapall"+t,r=Le.getItem(o);if(null==n&&null==r)return void((e,t)=>{e.classList.add("swap-selected"),Le.setItem("swap-action-"+t,e.id)})(e,t);if(Le.removeItem("swap-action-"+t),null==r)return void console.log("Nothing selected for action yet");Le.removeItem(o),e.classList.remove("swap-selected");const s=be.getElementById(r);if(null==s)return void console.error(r+" is missing??");s.classList.remove("swap-selected");const l=Ae.find(t=>t.id===e.id);null!=l?l.callback(s):console.error("No id action registered for "+e.id)},Ce=(e,t)=>{const n=(e=>{if(null!=e.getAttribute("swap-action"))return!1;const t=e.getAttribute("swap");return null!=t&&t})(t);n&&xe.filter(e=>e.group===n).forEach(n=>{(e=>Ae.push(e))(U(e,n,t.id))})},je=(e,t,n)=>{e.classList.add("swap-selected"),Le.setItem(n,e.id);const o=Le.getItem("swap-action-"+t);if(null==o)return;const r=be.getElementById(o);null!=r?Se(r,t):console.error(o+" action is missing??")};(e=>xe.push(e))({group:"swaps",actionID:"captain-butt",data:"- Captian -",dataIDpostFix:"data"});let We=null;const Fe=document.getElementById("results"),Ye=function(e,t){const n=he(e),o=ve(n),r=Ee(e,t,o,n),s=Me(e);return{changeScore:n,post:r,replacePost:we,download:s}}(document,Fe),Je=document.getElementById("seconds"),Ue=function(e,t,n=30){return{increment:me(e,t,n),reset:ge(e,t,n)}}(document.getElementById("minutes"),Je);document.getElementById("reset").addEventListener("click",()=>Ge()),document.getElementById("playon").addEventListener("click",()=>Ke()),document.getElementById("whistle").addEventListener("click",()=>Xe()),document.getElementById("finished").addEventListener("click",e=>ze(e)),document.getElementById("kickoff").addEventListener("click",()=>He()),document.getElementById("vrsScore").addEventListener("click",()=>Qe()),document.getElementById("updateInfo").addEventListener("click",()=>st()),document.getElementById("updateInfo2").addEventListener("click",()=>st()),document.getElementById("where").addEventListener("click",()=>$e()),document.getElementById("edit").addEventListener("click",()=>Re());console.log(""),console.log("     ,...                                                             ,,    ,,"),console.log('   .d\'""                  mm                                        `7MM  `7MM '),console.log("   dM`                    MM                                          MM    MM  "),console.log('  mMMmm,pW"Wq.   ,pW"Wq.mmMMmm     ,pP"Ybd `7M\'    ,A    `MF\'.gP"Ya   MM    MM  '),console.log("   MM 6W'   `Wb 6W'   `Wb MM       8I   `\"   VA   ,VAA   ,V ,M'   Yb  MM    MM  "),console.log('   MM 8M     M8 8M     M8 MM       `YMMMa.    VA ,V  VA ,V  8M""""""  MM    MM  '),console.log("   MM YA.   ,A9 YA.   ,A9 MM       L.   I8     VVV    VVV   YM.    ,  MM    MM  "),console.log(" .JMML.`Ybmd9'   `Ybmd9'  `Mbmo    M9mmmP'      W      W     `Mbmmd'.JMML..JMML."),console.log(""),I([e=>({attributes:["swap","swap-action"],process:(t,n)=>{const o=Oe(t,e);return!!o&&(Ce(e,t),Le.setItem(ke+t.id,JSON.stringify(o)),n?e.clickListener(t,e=>Ve(t),[n]):console.error("SWAP PLUGIN:No group name??! ",t),!0)}}),e=>(H=e,{attributes:["swapper","swapper-action"],process:t=>(G(e,t),e.clickListener(t,e=>X(t)),!0)}),e=>(z=e,{attributes:["toggle"],process:(t,n)=>(e.clickListener(t,e=>Q(t)),!0)}),e=>(re(),{attributes:["showhide","showhide-trigger"],process:(t,n)=>{const o=t.getAttribute("showhide");return o?(o.split(",").forEach(e=>oe(e.trim(),t)),!0):te(e,n,t)}}),e=>(ae(),{attributes:["if"],process:(t,n)=>{const o=t.getAttribute("if");if(!o)return!1;console.log("IFP - "+o+" has an if.... "),e.stateListener(o,n=>{const r=ie(e,o);ue(t,r)});const r=ie(e,o);return ue(t,r),!0}})]),(()=>{for(let e=1;e<22;e++){const t=document.getElementById("slot"+e+"b");try{t.addEventListener("click",e=>qe(e))}catch(t){console.error(e+". failed is it in the markup?"),console.error(t)}}})();const qe=e=>{if("kickoff"!==V())return;const t=e.target,n=tt(t);if(!n)return void console.error(t.name+" ("+t.id+") has no player defined!");Ye.post({detail:"Goal by "+n,state:"scored"});const o=document.getElementById("scored");o.innerText="!!! "+n+" scored !!!",o.classList.remove("hide"),h(o),setTimeout(()=>{document.getElementById("scored").classList.add("hide")},3e3)},He=()=>{N("kickoff"),document.getElementById("where").style.display="none",document.getElementById("kickoff-grid").style.display="none",document.getElementById("finished").classList.remove("hide"),ye=[];const e=_e();Ye.post({detail:e}),document.getElementById("score").innerText="0",document.getElementById("vrsScore").innerText="0",Ke()},_e=(e=!1)=>{const t=document.getElementById("where").innerText;return"Kick off "+(e?"HOME"===t?"away":"home":t.toLowerCase())+" vrs "+document.getElementById("opposition").value},Re=()=>{const e=V();N("edit"==e?"":"edit")},$e=()=>{const e=_e(),t=_e(!0);Ye.replacePost(e,t)},Ge=()=>{Ye.post({detail:"Second Half"}),Ue.reset()},Ke=()=>{N("kickoff"),We=setInterval(Ue.increment,1e3),document.getElementById("whistle").classList.remove("hide"),document.getElementById("stateblock").style.display="none"},Xe=()=>{N(""),document.getElementById("whistle").classList.add("hide"),document.getElementById("stateblock").style.display="grid",clearInterval(We),We=null},ze=e=>{Xe();const t=document.getElementById("vrsScore").innerText,n=document.getElementById("score").innerText,o=document.getElementById("opposition").value,r=document.getElementById("teamName").value;Ye.post({detail:"Final Whistle- "+r+":"+n+" vrs "+o+": "+t}),Ye.download(),document.getElementById("kickoff").style.display="block",e.target.style.display="none"},Qe=()=>{const e=document.getElementById("opposition").value;Ye.post({detail:"Conceded a goal from "+e,state:"concide"})},Ze=e=>{const t=document.getElementById(e);return null==t?(console.error(e+" doesn't exist?!"),null):et(t)},et=(e,t=[])=>{const n=e.getAttribute("name");if(null!=n&&t.push(n),e.children.length>0)for(let n=0;n<e.children.length;n++)t=et(e.children[n],t);return t},tt=e=>{const t=et(e);return nt(t)},nt=e=>{const t=e.find(e=>-1==e.indexOf("data"));return null==t?null:g(t).currentValue},ot=(e,t=1,n="")=>{if(t>5)return n;const o=e+"-"+t,r=Ze(o),s=nt(r),l=(e=>{const t=e.find(e=>e.indexOf("data")>-1);return null!=t&&g(t).currentValue.length>0})(r)?"(Captain)":"";if(null==s)console.error(o+" has no player name ?!!");else{const e=s+l;n=""===n?e:n+", "+e}return ot(e,t+1,n)},rt=(e,t)=>{const n=ot(t,1,"");return n?e+": "+n+". ":""},st=()=>{const e="Formation-  "+rt("Up front","front")+rt("Mid field","mid")+rt("Back","back")+(()=>{const e=Ze("goalie");return"Goalie: "+nt(e)})();console.log("FORMATION ",e),Ye.post({detail:e})}}]);
//# sourceMappingURL=index.fs.js.map